<div class="min-h-screen bg-gradient-to-br from-neutral-50 via-white to-neutral-100">
  <div class="flex">
    <!-- Enhanced Sidebar Navigation -->
    <aside class="w-72 bg-white border-r border-neutral-200 shadow-xl min-h-screen sticky top-0">
      <div class="p-6">
        <!-- User Profile Header -->
        <div class="mb-8 pb-6 border-b border-neutral-200">
          <div class="flex items-center space-x-4 mb-4">
            <div class="relative">
              <div class="w-14 h-14 rounded-2xl flex items-center justify-center text-white font-bold text-xl shadow-lg transform transition-transform duration-300 hover:scale-105"
                   [style.background]="'linear-gradient(135deg, ' + roleColors.primary + ', ' + roleColors.secondary + ')'">
                {{ user?.name?.charAt(0) || 'U' }}
              </div>
              <div class="absolute -bottom-1 -right-1 w-5 h-5 rounded-full border-2 border-white shadow-sm"
                   [style.background]="user?.active ? '#10B981' : '#EF4444'"></div>
            </div>
            <div class="flex-1 min-w-0">
              <h2 class="text-lg font-bold text-neutral-800 truncate">{{ user?.name || 'User' }}</h2>
              <span class="inline-block text-xs px-2.5 py-1 rounded-full text-white font-medium shadow-sm mt-1"
                    [style.background]="roleColors.primary">
                {{ user?.role?.toUpperCase() || 'USER' }}
              </span>
            </div>
          </div>
        </div>

        <!-- Navigation Menu -->
        <nav class="space-y-2">
          <button
            (click)="setSection('user')"
            [class]="selectedSection === 'user'
              ? 'w-full flex items-center space-x-3 px-4 py-3.5 rounded-xl text-white font-semibold shadow-lg transform transition-all duration-200 hover:scale-[1.02]'
              : 'w-full flex items-center space-x-3 px-4 py-3.5 rounded-xl text-neutral-700 hover:bg-neutral-50 hover:text-neutral-900 font-medium transition-all duration-200'"
            [style.background]="selectedSection === 'user' ? 'linear-gradient(135deg, ' + roleColors.primary + ', ' + roleColors.secondary + ')' : 'transparent'">
            <div class="p-2 rounded-lg transition-all duration-200"
                 [style.background]="selectedSection === 'user' ? 'rgba(255,255,255,0.2)' : roleColors.bg">
              <svg class="w-5 h-5" [style.color]="selectedSection === 'user' ? 'white' : roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
              </svg>
            </div>
            <span>User Profile</span>
          </button>

          <button
            (click)="setSection('entity')"
            [class]="selectedSection === 'entity'
              ? 'w-full flex items-center space-x-3 px-4 py-3.5 rounded-xl text-white font-semibold shadow-lg transform transition-all duration-200 hover:scale-[1.02]'
              : 'w-full flex items-center space-x-3 px-4 py-3.5 rounded-xl text-neutral-700 hover:bg-neutral-50 hover:text-neutral-900 font-medium transition-all duration-200'"
            [style.background]="selectedSection === 'entity' ? 'linear-gradient(135deg, ' + roleColors.primary + ', ' + roleColors.secondary + ')' : 'transparent'">
            <div class="p-2 rounded-lg transition-all duration-200"
                 [style.background]="selectedSection === 'entity' ? 'rgba(255,255,255,0.2)' : roleColors.bg">
              <svg class="w-5 h-5" [style.color]="selectedSection === 'entity' ? 'white' : roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
              </svg>
            </div>
            <span>Entity Details</span>
          </button>

          <button
          *ngIf="role === 'HEAD' || role === 'BRANCH'"
            (click)="setSection('website')"
            [class]="selectedSection === 'website'
              ? 'w-full flex items-center space-x-3 px-4 py-3.5 rounded-xl text-white font-semibold shadow-lg transform transition-all duration-200 hover:scale-[1.02]'
              : 'w-full flex items-center space-x-3 px-4 py-3.5 rounded-xl text-neutral-700 hover:bg-neutral-50 hover:text-neutral-900 font-medium transition-all duration-200'"
            [style.background]="selectedSection === 'website' ? 'linear-gradient(135deg, ' + roleColors.primary + ', ' + roleColors.secondary + ')' : 'transparent'">
            <div class="p-2 rounded-lg transition-all duration-200"
                 [style.background]="selectedSection === 'website' ? 'rgba(255,255,255,0.2)' : roleColors.bg">
              <svg class="w-5 h-5" [style.color]="selectedSection === 'website' ? 'white' : roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
              </svg>
            </div>
            <span>Websites</span>
          </button>

          <button
            (click)="setSection('password')"
            [class]="selectedSection === 'password'
              ? 'w-full flex items-center space-x-3 px-4 py-3.5 rounded-xl text-white font-semibold shadow-lg transform transition-all duration-200 hover:scale-[1.02]'
              : 'w-full flex items-center space-x-3 px-4 py-3.5 rounded-xl text-neutral-700 hover:bg-neutral-50 hover:text-neutral-900 font-medium transition-all duration-200'"
            [style.background]="selectedSection === 'password' ? 'linear-gradient(135deg, ' + roleColors.primary + ', ' + roleColors.secondary + ')' : 'transparent'">
            <div class="p-2 rounded-lg transition-all duration-200"
                 [style.background]="selectedSection === 'password' ? 'rgba(255,255,255,0.2)' : roleColors.bg">
              <svg class="w-5 h-5" [style.color]="selectedSection === 'password' ? 'white' : roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" />
              </svg>
            </div>
            <span>Security</span>
          </button>
        </nav>

        <!-- Role Badge Footer -->
        <div class="mt-8 pt-6 border-t border-neutral-200">
          <div class="p-4 rounded-xl" [style.background]="roleColors.bg">
            <div class="flex items-center justify-between mb-2">
              <span class="text-xs font-semibold text-neutral-600 uppercase tracking-wider">Access Level</span>
              <span class="w-2 h-2 rounded-full animate-pulse" [style.background]="roleColors.primary"></span>
            </div>
            <div class="flex items-center space-x-2">
              <div class="w-8 h-8 rounded-lg flex items-center justify-center" [style.background]="roleColors.primary">
                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                </svg>
              </div>
              <div>
                <p class="font-bold text-neutral-800">{{ user?.role?.charAt(0).toUpperCase() + user?.role?.slice(1) || 'User' }}</p>
                <p class="text-xs text-neutral-500">Full Access</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Enhanced Main Content Area -->
    <main class="flex-1 p-8">
      <div class="max-w-7xl mx-auto">

        <!-- USER PROFILE Section -->
        <div *ngIf="selectedSection === 'user'" class="animate-fade-in">
          <div class="mb-6">
            <h1 class="text-3xl font-bold text-neutral-800 mb-2">Personal Information</h1>
            <p class="text-neutral-600">Manage your account details and preferences</p>
          </div>

          <div class="bg-white rounded-2xl border border-neutral-200 shadow-xl overflow-hidden">
            <div class="p-8">
              <!-- Status Bar -->
              <div class="flex items-center justify-between mb-8 pb-6 border-b border-neutral-200">
                <div class="flex items-center space-x-4">
                  <div class="px-4 py-2 rounded-xl font-semibold text-white shadow-md"
                       [style.background]="'linear-gradient(135deg, ' + roleColors.primary + ', ' + roleColors.secondary + ')'">
                    {{ user?.role?.charAt(0).toUpperCase() + user?.role?.slice(1) || 'User' }}
                  </div>
                  <div class="px-4 py-2 rounded-xl border-2"
                       [style.background]="user?.active ? '#ECFDF5' : '#FEF2F2'"
                       [style.border-color]="user?.active ? '#10B981' : '#EF4444'">
                    <span class="flex items-center font-semibold">
                      <span class="w-2 h-2 rounded-full mr-2 animate-pulse"
                            [style.background]="user?.active ? '#10B981' : '#EF4444'"></span>
                      <span [style.color]="user?.active ? '#059669' : '#DC2626'">
                        {{ user?.active ? 'Active' : 'Inactive' }}
                      </span>
                    </span>
                  </div>
                </div>
                <div class="text-right">
                  <p class="text-sm text-neutral-500">Last Updated</p>
                  <p class="font-bold text-neutral-800">{{ user?.lastUpdated || 'N/A' }}</p>
                </div>
              </div>

              <!-- Info Cards Grid -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="group p-6 rounded-2xl border-2 border-neutral-200 hover:border-opacity-60 hover:shadow-lg transition-all duration-300"
                     [style.border-color]="roleColors.primary + '30'">
                  <div class="flex items-start space-x-4">
                    <div class="p-4 rounded-xl shadow-sm" [style.background]="roleColors.bg">
                      <svg class="w-7 h-7" [style.color]="roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                      </svg>
                    </div>
                    <div class="flex-1">
                      <label class="text-xs font-bold text-neutral-500 uppercase tracking-wider block mb-2">Full Name</label>
                      <p class="text-xl font-bold text-neutral-800">{{ user?.name || 'Not specified' }}</p>
                    </div>
                  </div>
                </div>

                <div class="group p-6 rounded-2xl border-2 border-neutral-200 hover:border-opacity-60 hover:shadow-lg transition-all duration-300"
                     [style.border-color]="roleColors.primary + '30'">
                  <div class="flex items-start space-x-4">
                    <div class="p-4 rounded-xl shadow-sm" [style.background]="roleColors.bg">
                      <svg class="w-7 h-7" [style.color]="roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                      </svg>
                    </div>
                    <div class="flex-1">
                      <label class="text-xs font-bold text-neutral-500 uppercase tracking-wider block mb-2">Email Address</label>
                      <p class="text-xl font-bold text-neutral-800 break-all">{{ user?.email || 'Not specified' }}</p>
                    </div>
                  </div>
                </div>

                <div class="group p-6 rounded-2xl border-2 border-neutral-200 hover:border-opacity-60 hover:shadow-lg transition-all duration-300"
                     [style.border-color]="roleColors.primary + '30'">
                  <div class="flex items-start space-x-4">
                    <div class="p-4 rounded-xl shadow-sm" [style.background]="roleColors.bg">
                      <svg class="w-7 h-7" [style.color]="roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                      </svg>
                    </div>
                    <div class="flex-1">
                      <label class="text-xs font-bold text-neutral-500 uppercase tracking-wider block mb-2">Phone Number</label>
                      <p class="text-xl font-bold text-neutral-800">{{ user?.phone || 'Not specified' }}</p>
                    </div>
                  </div>
                </div>

                <div class="group p-6 rounded-2xl border-2 border-neutral-200 hover:border-opacity-60 hover:shadow-lg transition-all duration-300"
                     [style.border-color]="roleColors.primary + '30'">
                  <div class="flex items-start space-x-4">
                    <div class="p-4 rounded-xl shadow-sm" [style.background]="roleColors.bg">
                      <svg class="w-7 h-7" [style.color]="roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2" />
                      </svg>
                    </div>
                    <div class="flex-1">
                      <label class="text-xs font-bold text-neutral-500 uppercase tracking-wider block mb-2">User ID</label>
                      <p class="text-lg font-mono font-bold" [style.color]="roleColors.primary">{{ user?.id || 'N/A' }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ENTITY DETAILS Section -->
        <div *ngIf="selectedSection === 'entity'" class="animate-fade-in">
          <div class="mb-6">
            <h1 class="text-3xl font-bold text-neutral-800 mb-2">Entity Configuration</h1>
            <p class="text-neutral-600">Account settings and linked resources</p>
          </div>

          <div class="bg-white rounded-2xl border border-neutral-200 shadow-xl overflow-hidden mb-6">
            <div class="p-8">
              <!-- Balance Header -->
              <div class="flex items-center justify-between mb-8 pb-6 border-b border-neutral-200">
                <div>
                  <p class="text-sm font-semibold text-neutral-500 uppercase tracking-wider mb-1">Available Balance</p>
                  <p class="text-4xl font-bold" [style.color]="roleColors.primary">₹ {{ entityInfo?.limit != null ? (entityInfo.limit | number:'1.2-2') : '0.00' }}</p>
                </div>
                <div class="w-20 h-20 rounded-2xl flex items-center justify-center shadow-lg"
                     [style.background]="'linear-gradient(135deg, ' + roleColors.primary + ', ' + roleColors.secondary + ')'">
                  <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
              </div>

              <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Entity Info Card -->
                <div class="p-6 rounded-2xl border-2 border-neutral-200 hover:shadow-lg transition-all duration-300"
                     [style.border-color]="roleColors.primary + '30'">
                  <div class="flex items-center mb-6">
                    <div class="p-3 rounded-xl mr-4" [style.background]="roleColors.bg">
                      <svg class="w-7 h-7" [style.color]="roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                      </svg>
                    </div>
                    <h4 class="text-xl font-bold text-neutral-800">Entity Details</h4>
                  </div>
                  <div class="space-y-4">
                    <div class="flex justify-between items-center p-4 rounded-xl hover:bg-neutral-50 transition-colors duration-200">
                      <span class="text-neutral-600 font-medium">Entity Name</span>
                      <span class="font-bold text-neutral-800">{{ entityInfo?.name || 'Not specified' }}</span>
                    </div>
                    <div class="flex justify-between items-center p-4 rounded-xl hover:bg-neutral-50 transition-colors duration-200">
                      <span class="text-neutral-600 font-medium">Account ID</span>
                      <span class="font-mono font-bold" [style.color]="roleColors.primary">{{ entityInfo?.id || 'N/A' }}</span>
                    </div>
                  </div>
                </div>

                <!-- Linked Websites Card -->
                <div class="p-6 rounded-2xl border-2 border-neutral-200 hover:shadow-lg transition-all duration-300"
                     [style.border-color]="roleColors.primary + '30'">
                  <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center">
                      <div class="p-3 rounded-xl mr-4" [style.background]="roleColors.bg">
                        <svg class="w-7 h-7" [style.color]="roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                        </svg>
                      </div>
                      <div>
                        <h4 class="text-xl font-bold text-neutral-800">Websites</h4>
                        <p class="text-sm text-neutral-500">Connected domains</p>
                      </div>
                    </div>
                    <div class="w-12 h-12 rounded-xl flex items-center justify-center font-bold text-white text-lg shadow-md"
                         [style.background]="roleColors.primary">
                      {{ (websiteInfo || []).length }}
                    </div>
                  </div>

                  <div *ngIf="(websiteInfo || []).length === 0"
                       class="text-center py-8 rounded-xl" [style.background]="roleColors.bg">
                    <svg class="w-16 h-16 mx-auto mb-4 opacity-40" [style.color]="roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                    </svg>
                    <p class="text-neutral-600 font-semibold">No websites configured</p>
                  </div>

                  <div class="space-y-3 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar">
                    <div *ngFor="let w of websiteInfo"
                         class="p-4 rounded-xl border-2 border-neutral-200 hover:shadow-md transition-all duration-300 group"
                         [style.border-color]="roleColors.primary + '20'">
                      <div class="flex justify-between items-center">
                        <div class="flex items-center flex-1 min-w-0">
                          <div class="p-2 rounded-lg mr-3" [style.background]="roleColors.bg">
                            <svg class="w-5 h-5" [style.color]="roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                            </svg>
                          </div>
                          <div class="min-w-0">
                            <p class="font-bold text-neutral-800 truncate">{{ w.websiteDomain }}</p>
                            <p class="text-xs text-neutral-500 font-mono">{{ w.websiteId }}</p>
                          </div>
                        </div>
                        <div class="flex items-center space-x-3 ml-4">
                          <div class="text-center">
                            <p class="text-xs text-neutral-500 mb-1">Topup</p>
                            <p class="font-bold text-emerald-600">{{ w.topupPercentage || 0 }}%</p>
                          </div>
                          <div class="text-center">
                            <p class="text-xs text-neutral-500 mb-1">Payout</p>
                            <p class="font-bold text-blue-600">{{ w.payoutPercentage || 0 }}%</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- WEBSITES Section -->
        <div *ngIf="selectedSection === 'website'" class="animate-fade-in">
          <div class="mb-6 flex items-center justify-between">
            <div>
              <h1 class="text-3xl font-bold text-neutral-800 mb-2">Website Configurations</h1>
              <p class="text-neutral-600">Manage settings for each connected website</p>
            </div>
            <div class="flex items-center space-x-3">
              <div class="px-5 py-2.5 rounded-xl text-white font-bold shadow-md"
                   [style.background]="'linear-gradient(135deg, ' + roleColors.primary + ', ' + roleColors.secondary + ')'">
                {{ (websiteInfo || []).length }} Website{{ (websiteInfo || []).length !== 1 ? 's' : '' }}
              </div>
            </div>
          </div>

          <!-- Empty State -->
          <div *ngIf="(websiteInfo || []).length === 0"
               class="bg-white rounded-2xl border border-neutral-200 p-16 text-center shadow-xl">
            <div class="max-w-md mx-auto">
              <div class="w-28 h-28 rounded-full mx-auto mb-6 flex items-center justify-center shadow-lg"
                   [style.background]="roleColors.bg">
                <svg class="w-14 h-14" [style.color]="roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                </svg>
              </div>
              <h3 class="text-2xl font-bold text-neutral-700 mb-3">No Websites Configured</h3>
              <p class="text-neutral-500 text-lg mb-8">Add websites to start configuring processing times, topup strengths, and payout rules.</p>
            </div>
          </div>

          <!-- Website Cards -->
          <div class="space-y-6">
            <div *ngFor="let w of websiteInfo; let i = index"
                 class="bg-white rounded-2xl border border-neutral-200 shadow-lg overflow-hidden transition-all duration-300 hover:shadow-2xl">
              <!-- Website Header -->
              <div
                class="p-6 cursor-pointer hover:bg-opacity-90 transition-all duration-300"
                [style.background]="'linear-gradient(135deg, ' + roleColors.bg + ', ' + roleColors.bg + 'CC)'"
                (click)="toggleWebsite(w.websiteId)">
                <div class="flex items-center justify-between">
                  <div class="flex items-center space-x-5">
                    <div class="relative">
                      <div class="w-16 h-16 rounded-2xl flex items-center justify-center text-white shadow-xl transform transition-transform duration-300 hover:scale-105"
                           [style.background]="'linear-gradient(135deg, ' + roleColors.primary + ', ' + roleColors.secondary + ')'">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                        </svg>
                      </div>
                      <div class="absolute -top-2 -right-2 w-7 h-7 rounded-full border-2 border-white text-xs flex items-center justify-center font-bold shadow-md text-white"
                           [style.background]="roleColors.primary">
                        {{ i + 1 }}
                      </div>
                    </div>
                    <div>
                      <h3 class="text-2xl font-bold text-neutral-800 mb-1">{{ w.websiteDomain }}</h3>
                      <div class="flex items-center space-x-3">
                        <span class="px-3 py-1 rounded-lg text-xs font-semibold bg-neutral-100 text-neutral-600">ID: {{ w.websiteId }}</span>
                        <span class="px-3 py-1 rounded-lg text-xs font-semibold"
                              [style.background]="roleColors.bg"
                              [style.color]="roleColors.primary">
                          Active
                        </span>
                      </div>
                    </div>
                  </div>

                  <div class="flex items-center space-x-6">
                    <div class="text-center px-4 py-3 rounded-xl bg-emerald-50 border-2 border-emerald-200">
                      <p class="text-xs font-semibold text-emerald-600 mb-1">Topup</p>
                      <p class="text-2xl font-bold text-emerald-600">{{ w.topupPercentage || 0 }}%</p>
                    </div>
                    <div class="text-center px-4 py-3 rounded-xl bg-blue-50 border-2 border-blue-200">
                      <p class="text-xs font-semibold text-blue-600 mb-1">Payout</p>
                      <p class="text-2xl font-bold text-blue-600">{{ w.payoutPercentage || 0 }}%</p>
                    </div>
                    <div class="w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-300 shadow-md"
                         [class.rotate-180]="isWebsiteExpanded(w.websiteId)"
                         [style.background]="roleColors.primary">
                      <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M19 9l-7 7-7-7" />
                      </svg>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Website Details (Expandable) -->
              <div *ngIf="isWebsiteExpanded(w.websiteId)" class="border-t-2 border-neutral-200">
                <div class="p-8 bg-gradient-to-br from-neutral-50 to-white">
                  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

                    <!-- Processing Time Card -->
                    <div class="p-6 rounded-2xl bg-white border-2 border-neutral-200 shadow-sm hover:shadow-md transition-all duration-300"
                         [style.border-color]="roleColors.primary + '30'">
                      <div class="flex items-center mb-5">
                        <div class="w-10 h-10 rounded-xl mr-3 flex items-center justify-center shadow-sm"
                             [style.background]="roleColors.bg">
                          <svg class="w-6 h-6" [style.color]="roleColors.primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>
                        </div>
                        <h4 class="font-bold text-neutral-800 text-lg">Processing Time</h4>
                      </div>

                      <div *ngIf="w.processingTime?.length; else noProcessingTime" class="space-y-3">
                        <div *ngFor="let e of w.processingTime; let i = index"
                             class="p-4 rounded-xl border-2 border-neutral-200 hover:shadow-sm transition-all duration-200"
                             [style.border-color]="roleColors.primary + '20'">
                          <div class="flex justify-between items-center mb-3">
                            <span class="font-semibold text-neutral-700">Range {{ i + 1 }}</span>
                            <span class="px-3 py-1 text-xs font-bold rounded-full"
                                  [style.background]="e.isUpto ? roleColors.bg : '#F3F4F6'"
                                  [style.color]="e.isUpto ? roleColors.primary : '#6B7280'">
                              {{ e.isUpto ? 'Upto' : 'Fixed' }}
                            </span>
                          </div>
                          <div class="grid grid-cols-2 gap-3">
                            <div class="p-3 rounded-lg bg-neutral-50">
                              <p class="text-xs text-neutral-500 font-semibold mb-1">Amount Range</p>
                              <p class="font-bold text-neutral-800">₹{{ i === 0 ? (e.minRange ?? 0) : (w?.processingTime[i-1]?.maxRange) }} - {{ e.maxRange === 'UPTO' || e.isUpto ? 'UPTO' : e.maxRange }}</p>
                            </div>
                            <div class="p-3 rounded-lg" [style.background]="roleColors.bg">
                              <p class="text-xs font-semibold mb-1" [style.color]="roleColors.primary + 'CC'">Time (mins)</p>
                              <p class="font-bold text-xl" [style.color]="roleColors.primary">{{ e.time ?? '-' }}</p>
                            </div>
                          </div>
                        </div>
                      </div>
                      <ng-template #noProcessingTime>
                        <div class="text-center py-8 rounded-xl" [style.background]="roleColors.bg + '40'">
                          <p class="text-neutral-500">No processing time configured</p>
                        </div>
                      </ng-template>
                    </div>

                    <!-- Topup Strengths Card -->
                    <div class="space-y-6">
                      <!-- UPI Topup -->
                      <div class="p-6 rounded-2xl bg-white border-2 border-emerald-200 shadow-sm hover:shadow-md transition-all duration-300">
                        <div class="flex items-center mb-5">
                          <div class="w-10 h-10 rounded-xl mr-3 flex items-center justify-center bg-emerald-50 shadow-sm">
                            <svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                          </div>
                          <h4 class="font-bold text-neutral-800">UPI Topup</h4>
                        </div>

                        <div *ngIf="(w._raw?.topupsTimeStrength?.upi?.timeRanges || w.topupsTimeStrength || []) as upiList">
                          <div *ngIf="upiList?.length; else noUpiTopup" class="space-y-3">
                            <div *ngFor="let t of upiList; let i = index"
                                 class="p-3 rounded-xl border-2 border-emerald-200 hover:bg-emerald-50 transition-all duration-200">
                              <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-semibold text-neutral-700">Range {{ i + 1 }}</span>
                                <span class="px-3 py-1 rounded-full text-xs font-bold bg-emerald-100 text-emerald-700">
                                  {{ t.percentage ?? t.per }}%
                                </span>
                              </div>
                              <div class="flex items-center justify-between text-sm">
                                <span class="text-emerald-600 font-semibold">{{ i === 0 ? (t.minMinutes ?? 0) : (upiList[i-1].maxMinutes) }} - {{ t.maxMinutes === 0 && t.isUpto ? 'UPTO' : t.maxMinutes }} mins</span>
                                <span class="text-xs text-neutral-500">{{ t.isUpto ? 'Upto' : 'Fixed' }}</span>
                              </div>
                            </div>
                          </div>
                          <ng-template #noUpiTopup>
                            <div class="text-center py-6 rounded-xl bg-neutral-50">
                              <p class="text-neutral-500 text-sm">Not configured</p>
                            </div>
                          </ng-template>
                        </div>
                      </div>

                      <!-- Bank Topup -->
                      <div class="p-6 rounded-2xl bg-white border-2 border-blue-200 shadow-sm hover:shadow-md transition-all duration-300">
                        <div class="flex items-center mb-5">
                          <div class="w-10 h-10 rounded-xl mr-3 flex items-center justify-center bg-blue-50 shadow-sm">
                            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                            </svg>
                          </div>
                          <h4 class="font-bold text-neutral-800">Bank Topup</h4>
                        </div>

                        <div *ngIf="(w._raw?.topupsTimeStrength?.bank?.timeRanges || w._raw?.bankTimeStrength || w.bankTimeStrength || []) as bankList">
                          <div *ngIf="bankList?.length; else noBankTopup" class="space-y-3">
                            <div *ngFor="let t of bankList; let i = index"
                                 class="p-3 rounded-xl border-2 border-blue-200 hover:bg-blue-50 transition-all duration-200">
                              <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-semibold text-neutral-700">Range {{ i + 1 }}</span>
                                <span class="px-3 py-1 rounded-full text-xs font-bold bg-blue-100 text-blue-700">
                                  {{ t.percentage ?? t.per }}%
                                </span>
                              </div>
                              <div class="flex items-center justify-between text-sm">
                                <span class="text-blue-600 font-semibold">{{ i === 0 ? (t.minMinutes ?? 0) : (bankList[i-1].maxMinutes) }} - {{ t.maxMinutes === 0 && t.isUpto ? 'UPTO' : t.maxMinutes }} mins</span>
                                <span class="text-xs text-neutral-500">{{ t.isUpto ? 'Upto' : 'Fixed' }}</span>
                              </div>
                            </div>
                          </div>
                          <ng-template #noBankTopup>
                            <div class="text-center py-6 rounded-xl bg-neutral-50">
                              <p class="text-neutral-500 text-sm">Not configured</p>
                            </div>
                          </ng-template>
                        </div>
                      </div>
                    </div>

                    <!-- Payout Configuration Card -->
                    <div class="p-6 rounded-2xl bg-white border-2 border-purple-200 shadow-sm hover:shadow-md transition-all duration-300">
                      <div class="flex items-center mb-5">
                        <div class="w-10 h-10 rounded-xl mr-3 flex items-center justify-center bg-purple-50 shadow-sm">
                          <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" />
                          </svg>
                        </div>
                        <h4 class="font-bold text-neutral-800 text-lg">Payout Config</h4>
                      </div>

                      <div *ngIf="(w.payoutsTimeStrength?.amountRanges || w._raw?.payoutsTimeStrength?.amountRanges || w.payoutsTimeStrength || []) as amtList">
                        <div *ngIf="amtList?.length; else noPayoutConfig" class="space-y-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar">
                          <div *ngFor="let a of amtList; let j = index"
                               class="p-4 rounded-xl border-2 border-purple-200 hover:shadow-sm transition-all duration-200">
                            <div class="flex justify-between items-center mb-3">
                              <span class="font-bold text-purple-700 text-lg">₹{{ j === 0 ? (a.minAmount ?? 0) : (amtList[j-1].maxAmount) }} - {{ a.maxAmount === 0 && a.isUpto ? 'UPTO' : a.maxAmount }}</span>
                              <span class="px-3 py-1 text-xs font-bold rounded-full bg-purple-100 text-purple-700">
                                {{ a.isUpto ? 'Upto' : 'Fixed' }}
                              </span>
                            </div>

                            <div *ngIf="a.timeRanges?.length">
                              <p class="text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-3">Time Strengths</p>
                              <div class="space-y-2">
                                <div *ngFor="let tr of a.timeRanges; let k = index"
                                     class="p-3 rounded-lg bg-purple-50 hover:bg-purple-100 transition-colors duration-200">
                                  <div class="flex justify-between items-center">
                                    <span class="text-sm font-semibold text-purple-800">
                                      {{ k === 0 ? (tr.minMinutes ?? 0) : (a.timeRanges[k-1].maxMinutes) }} - {{ tr.maxMinutes === 0 && tr.isUpto ? 'UPTO' : tr.maxMinutes }} mins
                                    </span>
                                    <span class="px-2 py-1 text-xs rounded-full bg-white text-purple-700 font-bold shadow-sm">
                                      {{ tr.percentage ?? tr.per }}%
                                    </span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <ng-template #noPayoutConfig>
                          <div class="text-center py-8 rounded-xl bg-neutral-50">
                            <p class="text-neutral-500">No payout configuration</p>
                          </div>
                        </ng-template>
                      </div>
                    </div>
                  </div>

                  <!-- Raw Data Section -->
                  <div class="mt-8">
                    <button
                      (click)="toggleRawData(w.websiteId)"
                      class="flex items-center px-4 py-2 rounded-xl font-semibold mb-4 hover:shadow-md transition-all duration-200"
                      [style.background]="roleColors.bg"
                      [style.color]="roleColors.primary">
                      <svg
                        [class]="isRawDataExpanded(w.websiteId) ? 'w-5 h-5 mr-2 transform rotate-180 transition-transform duration-300' : 'w-5 h-5 mr-2 transition-transform duration-300'"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M19 9l-7 7-7-7" />
                      </svg>
                      Raw Data Preview
                    </button>

                    <div *ngIf="isRawDataExpanded(w.websiteId)" class="animate-fade-in">
                      <div class="bg-neutral-900 rounded-2xl p-6 shadow-2xl">
                        <div class="flex justify-between items-center mb-4">
                          <p class="text-sm font-bold text-neutral-300 uppercase tracking-wider">JSON Payload</p>
                          <button
                            (click)="copyRawData(w)"
                            class="px-4 py-2 rounded-lg hover:bg-neutral-800 transition-all duration-200 text-neutral-300 hover:text-white font-semibold">
                            Copy
                          </button>
                        </div>
                        <pre class="text-sm text-neutral-300 overflow-x-auto max-h-72 p-4 bg-neutral-950 rounded-xl custom-scrollbar">{{ w._raw | json }}</pre>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- CHANGE PASSWORD Section -->
        <div *ngIf="selectedSection === 'password'" class="animate-fade-in">
          <div class="max-w-2xl mx-auto">
            <div class="mb-6">
              <h1 class="text-3xl font-bold text-neutral-800 mb-2">Security Settings</h1>
              <p class="text-neutral-600">Update your account password for enhanced security</p>
            </div>

            <div class="bg-white rounded-2xl border border-neutral-200 shadow-xl overflow-hidden">
              <div class="p-8">
                <div class="flex items-center justify-between mb-8 pb-6 border-b border-neutral-200">
                  <div>
                    <h3 class="text-2xl font-bold text-neutral-800 mb-2">Change Password</h3>
                    <p class="text-neutral-600">Ensure your password is strong and secure</p>
                  </div>
                  <div class="w-16 h-16 rounded-2xl flex items-center justify-center text-white shadow-lg"
                       [style.background]="'linear-gradient(135deg, ' + roleColors.primary + ', ' + roleColors.secondary + ')'">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                    </svg>
                  </div>
                </div>

                <form (ngSubmit)="changePassword()" class="space-y-6" #pwForm="ngForm">
                  <div class="space-y-6">
                    <div>
                      <label for="oldPassword" class="block text-sm font-bold text-neutral-700 mb-3">Current Password</label>
                      <div class="relative">
                        <input
                          type="password"
                          id="oldPassword"
                          [(ngModel)]="passwordData.oldPassword"
                          name="oldPassword"
                          placeholder="Enter your current password"
                          required
                          class="w-full px-5 py-4 pl-14 border-2 border-neutral-300 rounded-xl shadow-sm focus:outline-none focus:ring-4 focus:border-transparent transition-all duration-200 font-medium"
                          [style.focus:ring-color]="roleColors.glow"
                          [style.focus:border-color]="roleColors.primary">
                        <div class="absolute left-5 top-1/2 transform -translate-y-1/2">
                          <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                          </svg>
                        </div>
                      </div>
                    </div>

                    <div>
                      <label for="newPassword" class="block text-sm font-bold text-neutral-700 mb-3">New Password</label>
                      <div class="relative">
                        <input
                          type="password"
                          id="newPassword"
                          [(ngModel)]="passwordData.newPassword"
                          name="newPassword"
                          placeholder="Enter your new password"
                          required
                          class="w-full px-5 py-4 pl-14 border-2 border-neutral-300 rounded-xl shadow-sm focus:outline-none focus:ring-4 focus:border-transparent transition-all duration-200 font-medium"
                          [style.focus:ring-color]="roleColors.glow"
                          [style.focus:border-color]="roleColors.primary">
                        <div class="absolute left-5 top-1/2 transform -translate-y-1/2">
                          <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                          </svg>
                        </div>
                      </div>
                    </div>

                    <div>
                      <label for="confirmPassword" class="block text-sm font-bold text-neutral-700 mb-3">Confirm New Password</label>
                      <div class="relative">
                        <input
                          type="password"
                          id="confirmPassword"
                          [(ngModel)]="passwordData.confirmPassword"
                          name="confirmPassword"
                          placeholder="Confirm your new password"
                          required
                          class="w-full px-5 py-4 pl-14 border-2 border-neutral-300 rounded-xl shadow-sm focus:outline-none focus:ring-4 focus:border-transparent transition-all duration-200 font-medium"
                          [style.focus:ring-color]="roleColors.glow"
                          [style.focus:border-color]="roleColors.primary">
                        <div class="absolute left-5 top-1/2 transform -translate-y-1/2">
                          <svg class="w-5 h-5 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                          </svg>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div *ngIf="errorMessage" class="p-5 rounded-xl bg-red-50 border-2 border-red-200 animate-fade-in">
                    <div class="flex items-center">
                      <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center mr-3">
                        <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                      </div>
                      <p class="text-red-700 font-semibold">{{ errorMessage }}</p>
                    </div>
                  </div>

                  <div *ngIf="successMessage" class="p-5 rounded-xl bg-emerald-50 border-2 border-emerald-200 animate-fade-in">
                    <div class="flex items-center">
                      <div class="w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center mr-3">
                        <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                      </div>
                      <p class="text-emerald-700 font-semibold">{{ successMessage }}</p>
                    </div>
                  </div>

                  <button
                    type="submit"
                    [disabled]="pwForm.invalid"
                    class="w-full py-4 px-6 rounded-xl font-bold text-white shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-lg"
                    [style.background]="'linear-gradient(135deg, ' + roleColors.primary + ', ' + roleColors.secondary + ')'">
                    <div class="flex items-center justify-center">
                      <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" />
                      </svg>
                      Update Password
                    </div>
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
